============================================
basejump_stl/hard/ultrascale_plus/bsg_mem/bsg_mem_1rw_sync_mask_write_bit
============================================

/*
* bsg_mem_1rw_sync_mask_write_bit.sv
*
* distributed synchronous 1-port ram for xilinx ultrascale or ultrascale plus FPGA
* Write mode: No-change | Read mode: No-change
* Note:
* There are 2 basic BRAM library primitives, RAMB18E2 and RAMB36E2 in Vivado.
* But none of them support bit-wise mask. They have Byte-wide write enable ports though.
* So we use the RAM_STYLE attribute to instruct the tool to infer distributed LUT RAM instead.
*
* To save resources, the code is written to be inferred as Single-port distributed ram RAM64X1S.
* https://www.xilinx.com/support/documentation/user_guides/ug574-ultrascale-clb.pdf
*
*/

`include "bsg_defines.sv"

module bsg_mem_1rw_sync_mask_write_bit_distributed #(
  parameter `BSG_INV_PARAM(width_p )
  , parameter `BSG_INV_PARAM(els_p )
  , parameter latch_last_read_p=0
  , parameter enable_clock_gating_p=0
  , localparam addr_width_lp = `BSG_SAFE_CLOG2(els_p)
) (
  input                                     clk_i
  , input                                   reset_i
  , input  [`BSG_SAFE_MINUS(width_p,1):0] data_i
  , input  [ addr_width_lp-1:0]             addr_i
  , input                                   v_i
  , input  [`BSG_SAFE_MINUS(width_p,1):0] w_mask_i
  , input                                   w_i
  , output [`BSG_SAFE_MINUS(width_p,1):0] data_o
);

  wire unused = reset_i;

  if (width_p == 0)
   begin: z
     wire unused0 = &{clk_i, v_i, data_i, addr_i, w_i};
     assign data_o = '0;
   end
  else
   begin: nz

  (* ram_style = "distributed" *) logic [`BSG_SAFE_MINUS(width_p,1):0] mem [els_p-1:0];

  logic [`BSG_SAFE_MINUS(width_p,1):0] data_r;
  always_ff @(posedge clk_i) begin
    if (v_i & ~w_i)
      data_r <= mem[addr_i];
  end

  initial
    begin
      $display("BSG INFO: els_p=%d width_p=%d 1RW SRAM Mask Write ram will be inferred as distributed RAM.",els_p,width_p);
    end
  
  assign data_o = data_r;

  for (genvar i=0; i<width_p; i=i+1) begin
    always_ff @(posedge clk_i) begin
      if (v_i)
        if (w_i & w_mask_i[i])
          mem[addr_i][i] <= data_i[i];
    end
  end
  end // non_zero_width

endmodule

`BSG_ABSTRACT_MODULE(bsg_mem_1rw_sync_mask_write_bit_distributed)

/* For RAMs larger than 512b, we use a 1r1w bram (pseudo bit-mask), for smaller, we use lutram */
 module bsg_mem_1rw_sync_mask_write_bit #(
   parameter `BSG_INV_PARAM(width_p )
   , parameter `BSG_INV_PARAM(els_p )
   , parameter latch_last_read_p=0
   , parameter enable_clock_gating_p=0
   , localparam addr_width_lp = `BSG_SAFE_CLOG2(els_p)
 ) (
   input                                     clk_i
   , input                                   reset_i
   , input  [`BSG_SAFE_MINUS(width_p,1):0] data_i
   , input  [ addr_width_lp-1:0]             addr_i
   , input                                   v_i
   , input  [`BSG_SAFE_MINUS(width_p,1):0] w_mask_i
   , input                                   w_i
   , output [`BSG_SAFE_MINUS(width_p,1):0] data_o
 );

  if (els_p*width_p >= 512)
    begin : from1r1w
     bsg_mem_1rw_sync_mask_write_bit_from_1r1w #(
     .width_p(width_p)
     ,.els_p(els_p)
     ,.latch_last_read_p(latch_last_read_p)
     ,.enable_clock_gating_p(enable_clock_gating_p)
     ) ram (.*);
    end
  else
  begin : fromlutram
    bsg_mem_1rw_sync_mask_write_bit_distributed #(
    .width_p(width_p)
    ,.els_p(els_p)
    ,.latch_last_read_p(latch_last_read_p)
    ,.enable_clock_gating_p(enable_clock_gating_p)
    ) ram (.*);
  end

 endmodule

 `BSG_ABSTRACT_MODULE(bsg_mem_1rw_sync_mask_write_bit)


----

(source_file
  (block_comment)
  (include_compiler_directive
    (quoted_string
      (quoted_string_item)))
  (module_declaration
    (module_ansi_header
      (module_keyword)
      name: (simple_identifier)
      (parameter_port_list
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))))
        (parameter_port_declaration
          (local_parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (text_macro_usage
                        (simple_identifier)
                        (list_of_actual_arguments
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier)))))))))))))))))
      (list_of_port_declarations
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        (text_macro_usage
                          (simple_identifier)
                          (list_of_actual_arguments
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))))
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (primary_literal
                                        (integral_number
                                          (decimal_number
                                            (unsigned_number))))))))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        (text_macro_usage
                          (simple_identifier)
                          (list_of_actual_arguments
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))))
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (primary_literal
                                        (integral_number
                                          (decimal_number
                                            (unsigned_number))))))))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        (text_macro_usage
                          (simple_identifier)
                          (list_of_actual_arguments
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))))
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (primary_literal
                                        (integral_number
                                          (decimal_number
                                            (unsigned_number))))))))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))))
    (net_declaration
      (net_type)
      (list_of_net_decl_assignments
        (net_decl_assignment
          (simple_identifier)
          (expression
            (primary
              (hierarchical_identifier
                (simple_identifier)))))))
    (conditional_generate_construct
      (if_generate_construct
        (constant_expression
          left: (constant_expression
            (constant_primary
              (simple_identifier)))
          right: (constant_expression
            (constant_primary
              (primary_literal
                (integral_number
                  (decimal_number
                    (unsigned_number)))))))
        (generate_block
          name: (simple_identifier)
          (net_declaration
            (net_type)
            (list_of_net_decl_assignments
              (net_decl_assignment
                (simple_identifier)
                (expression
                  operator: (unary_operator)
                  argument: (primary
                    (concatenation
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))))))))
          (continuous_assign
            (list_of_net_assignments
              (net_assignment
                (net_lvalue
                  (simple_identifier))
                (expression
                  (primary
                    (primary_literal
                      (unbased_unsized_literal))))))))
        (generate_block
          name: (simple_identifier)
          (attribute_instance
            (attr_spec
              (simple_identifier)
              (constant_expression
                (constant_primary
                  (primary_literal
                    (string_literal
                      (quoted_string
                        (quoted_string_item))))))))
          (data_declaration
            (data_type_or_implicit
              (data_type
                (integer_vector_type)
                (packed_dimension
                  (constant_range
                    (constant_expression
                      (text_macro_usage
                        (simple_identifier)
                        (list_of_actual_arguments
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier)))))))
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (primary_literal
                                      (integral_number
                                        (decimal_number
                                          (unsigned_number))))))))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))
            (list_of_variable_decl_assignments
              (variable_decl_assignment
                name: (simple_identifier)
                (unpacked_dimension
                  (constant_range
                    (constant_expression
                      left: (constant_expression
                        (constant_primary
                          (simple_identifier)))
                      right: (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number)))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))))))
          (data_declaration
            (data_type_or_implicit
              (data_type
                (integer_vector_type)
                (packed_dimension
                  (constant_range
                    (constant_expression
                      (text_macro_usage
                        (simple_identifier)
                        (list_of_actual_arguments
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier)))))))
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (primary_literal
                                      (integral_number
                                        (decimal_number
                                          (unsigned_number))))))))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))
            (list_of_variable_decl_assignments
              (variable_decl_assignment
                name: (simple_identifier))))
          (always_construct
            (always_keyword)
            (statement
              (statement_item
                (procedural_timing_control_statement
                  (event_control
                    (clocking_event
                      (event_expression
                        (edge_identifier)
                        (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))))
                  (statement_or_null
                    (statement
                      (statement_item
                        (seq_block
                          (statement_or_null
                            (statement
                              (statement_item
                                (conditional_statement
                                  (cond_predicate
                                    (expression
                                      left: (expression
                                        (primary
                                          (hierarchical_identifier
                                            (simple_identifier))))
                                      right: (expression
                                        operator: (unary_operator)
                                        argument: (primary
                                          (hierarchical_identifier
                                            (simple_identifier))))))
                                  (statement_or_null
                                    (statement
                                      (statement_item
                                        (nonblocking_assignment
                                          (variable_lvalue
                                            (hierarchical_identifier
                                              (simple_identifier)))
                                          (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))
                                              (select
                                                (bit_select
                                                  (expression
                                                    (primary
                                                      (hierarchical_identifier
                                                        (simple_identifier))))))))))))))))))))))))
          (initial_construct
            (statement_or_null
              (statement
                (statement_item
                  (seq_block
                    (statement_or_null
                      (statement
                        (statement_item
                          (subroutine_call_statement
                            (subroutine_call
                              (system_tf_call
                                (system_tf_identifier)
                                (list_of_arguments
                                  (expression
                                    (primary
                                      (primary_literal
                                        (string_literal
                                          (quoted_string
                                            (quoted_string_item))))))
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier))))
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier))))))))))))))))
          (continuous_assign
            (list_of_net_assignments
              (net_assignment
                (net_lvalue
                  (simple_identifier))
                (expression
                  (primary
                    (hierarchical_identifier
                      (simple_identifier)))))))
          (loop_generate_construct
            (genvar_initialization
              (simple_identifier)
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number)))))))
            (constant_expression
              left: (constant_expression
                (constant_primary
                  (simple_identifier)))
              right: (constant_expression
                (constant_primary
                  (simple_identifier))))
            (genvar_iteration
              (simple_identifier)
              (assignment_operator)
              (constant_expression
                left: (constant_expression
                  (constant_primary
                    (simple_identifier)))
                right: (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))
            (generate_block
              (always_construct
                (always_keyword)
                (statement
                  (statement_item
                    (procedural_timing_control_statement
                      (event_control
                        (clocking_event
                          (event_expression
                            (edge_identifier)
                            (expression
                              (primary
                                (hierarchical_identifier
                                  (simple_identifier)))))))
                      (statement_or_null
                        (statement
                          (statement_item
                            (seq_block
                              (statement_or_null
                                (statement
                                  (statement_item
                                    (conditional_statement
                                      (cond_predicate
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier)))))
                                      (statement_or_null
                                        (statement
                                          (statement_item
                                            (conditional_statement
                                              (cond_predicate
                                                (expression
                                                  left: (expression
                                                    (primary
                                                      (hierarchical_identifier
                                                        (simple_identifier))))
                                                  right: (expression
                                                    (primary
                                                      (hierarchical_identifier
                                                        (simple_identifier))
                                                      (select
                                                        (bit_select
                                                          (expression
                                                            (primary
                                                              (hierarchical_identifier
                                                                (simple_identifier))))))))))
                                              (statement_or_null
                                                (statement
                                                  (statement_item
                                                    (nonblocking_assignment
                                                      (variable_lvalue
                                                        (hierarchical_identifier
                                                          (simple_identifier))
                                                        (select
                                                          (bit_select
                                                            (expression
                                                              (primary
                                                                (hierarchical_identifier
                                                                  (simple_identifier))))
                                                            (expression
                                                              (primary
                                                                (hierarchical_identifier
                                                                  (simple_identifier)))))))
                                                      (expression
                                                        (primary
                                                          (hierarchical_identifier
                                                            (simple_identifier))
                                                          (select
                                                            (bit_select
                                                              (expression
                                                                (primary
                                                                  (hierarchical_identifier
                                                                    (simple_identifier)))))))))))))))))))))))))))))))))
    (one_line_comment))
  (text_macro_usage
    (simple_identifier)
    (list_of_actual_arguments
      (actual_argument
        (param_expression
          (mintypmax_expression
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier)))))))))
  (block_comment)
  (module_declaration
    (module_ansi_header
      (module_keyword)
      name: (simple_identifier)
      (parameter_port_list
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))))
        (parameter_port_declaration
          (local_parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (text_macro_usage
                        (simple_identifier)
                        (list_of_actual_arguments
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier)))))))))))))))))
      (list_of_port_declarations
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        (text_macro_usage
                          (simple_identifier)
                          (list_of_actual_arguments
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))))
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (primary_literal
                                        (integral_number
                                          (decimal_number
                                            (unsigned_number))))))))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        (text_macro_usage
                          (simple_identifier)
                          (list_of_actual_arguments
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))))
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (primary_literal
                                        (integral_number
                                          (decimal_number
                                            (unsigned_number))))))))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        (text_macro_usage
                          (simple_identifier)
                          (list_of_actual_arguments
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))))
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (primary_literal
                                        (integral_number
                                          (decimal_number
                                            (unsigned_number))))))))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))))
    (conditional_generate_construct
      (if_generate_construct
        (constant_expression
          left: (constant_expression
            left: (constant_expression
              (constant_primary
                (simple_identifier)))
            right: (constant_expression
              (constant_primary
                (simple_identifier))))
          right: (constant_expression
            (constant_primary
              (primary_literal
                (integral_number
                  (decimal_number
                    (unsigned_number)))))))
        (generate_block
          name: (simple_identifier)
          (module_instantiation
            instance_type: (simple_identifier)
            (parameter_value_assignment
              (list_of_parameter_value_assignments
                (named_parameter_assignment
                  (simple_identifier)
                  (param_expression
                    (mintypmax_expression
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))
                (named_parameter_assignment
                  (simple_identifier)
                  (param_expression
                    (mintypmax_expression
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))
                (named_parameter_assignment
                  (simple_identifier)
                  (param_expression
                    (mintypmax_expression
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))
                (named_parameter_assignment
                  (simple_identifier)
                  (param_expression
                    (mintypmax_expression
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))))
            (hierarchical_instance
              (name_of_instance
                instance_name: (simple_identifier))
              (list_of_port_connections
                (named_port_connection)))))
        (generate_block
          name: (simple_identifier)
          (module_instantiation
            instance_type: (simple_identifier)
            (parameter_value_assignment
              (list_of_parameter_value_assignments
                (named_parameter_assignment
                  (simple_identifier)
                  (param_expression
                    (mintypmax_expression
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))
                (named_parameter_assignment
                  (simple_identifier)
                  (param_expression
                    (mintypmax_expression
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))
                (named_parameter_assignment
                  (simple_identifier)
                  (param_expression
                    (mintypmax_expression
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))
                (named_parameter_assignment
                  (simple_identifier)
                  (param_expression
                    (mintypmax_expression
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))))
            (hierarchical_instance
              (name_of_instance
                instance_name: (simple_identifier))
              (list_of_port_connections
                (named_port_connection))))))))
  (text_macro_usage
    (simple_identifier)
    (list_of_actual_arguments
      (actual_argument
        (param_expression
          (mintypmax_expression
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier))))))))))
