============================================
basejump_stl/bsg_mem/bsg_mem_1rw_sync_mask_write_bit_synth
============================================

// MBT 11/9/2014
//
// Synchronous 1-port ram.
// Only one read or one write may be done per cycle.
//
// NOTE: Users of BaseJump STL should not instantiate this module directly
// they should use bsg_mem_1rw_sync_mask_write_bit.
//

`include "bsg_defines.sv"

module bsg_mem_1rw_sync_mask_write_bit_synth
  #(parameter `BSG_INV_PARAM(width_p)
    , parameter `BSG_INV_PARAM(els_p)
    , parameter latch_last_read_p=0
    , parameter addr_width_lp=`BSG_SAFE_CLOG2(els_p)
   )
   (input   clk_i
    , input reset_i
    , input [`BSG_SAFE_MINUS(width_p, 1):0] data_i
    , input [addr_width_lp-1:0] addr_i
    , input v_i
    , input [`BSG_SAFE_MINUS(width_p, 1):0] w_mask_i
    , input w_i
    , output logic [`BSG_SAFE_MINUS(width_p, 1):0]  data_o
    );

   wire unused = reset_i;

   if (width_p == 0 || els_p == 0)
    begin: z
      wire unused0 = &{clk_i, data_i, addr_i, v_i, w_mask_i, w_i};
      assign data_o = '0;
    end
   else
    begin: nz

   logic [addr_width_lp-1:0] addr_r;
   logic [width_p-1:0] mem [els_p-1:0];
   logic read_en;
   
   wire [addr_width_lp-1:0] addr_li = (els_p>1) ? addr_i:'0;
   
   assign read_en = v_i & ~w_i;

   always_ff @(posedge clk_i)
     if (read_en)
       addr_r <= addr_li;
     else
       addr_r <= 'X;

   logic [width_p-1:0] data_out;

   assign data_out = mem[addr_r];

   if (latch_last_read_p)
     begin: llr
      logic read_en_r; 

      bsg_dff #(
        .width_p(1)
      ) read_en_dff (
        .clk_i(clk_i)
        ,.data_i(read_en)
        ,.data_o(read_en_r)
      );

      bsg_dff_en_bypass #(
        .width_p(width_p)
      ) dff_bypass (
        .clk_i(clk_i)
        ,.en_i(read_en_r)
        ,.data_i(data_out)
        ,.data_o(data_o)
      );
     end
   else
     begin: no_llr
       assign data_o = data_out;
     end



// The Verilator and non-Verilator models are functionally equivalent. However, Verilator
//   cannot handle an array of non-blocking assignments in a for loop. It would be nice to 
//   see if these two models synthesize the same, because we can then reduce to the Verilator
//   model and avoid double maintenence. One could also add this feature to Verilator...
//   (Identified in Verilator 4.011)
`ifdef VERILATOR
   logic [width_p-1:0] data_n;

   for (genvar i = 0; i < width_p; i++)
     begin : rof1
       assign data_n[i] = w_mask_i[i] ? data_i[i] : mem[addr_li][i];
     end // rof1

   always_ff @(posedge clk_i)
     if (v_i & w_i)
       mem[addr_li] <= data_n;

`else
 
// this code does not map correctly with Xilinx Ultrascale FPGAs 
// in Vivado, substitute this file with hard/ultrascale_plus/bsg_mem/bsg_mem_1rw_sync_mask_write_bit.sv
      
`BSG_VIVADO_SYNTH_FAILS
      
   always_ff @(posedge clk_i)
     if (v_i & w_i)
       for (integer i = 0; i < width_p; i=i+1)
         if (w_mask_i[i])
           mem[addr_li][i] <= data_i[i];
`endif
   end
endmodule

`BSG_ABSTRACT_MODULE(bsg_mem_1rw_sync_mask_write_bit_synth)

----

(source_file
  (one_line_comment)
  (one_line_comment)
  (one_line_comment)
  (one_line_comment)
  (one_line_comment)
  (one_line_comment)
  (one_line_comment)
  (one_line_comment)
  (include_compiler_directive
    (quoted_string
      (quoted_string_item)))
  (module_declaration
    (module_ansi_header
      (module_keyword)
      name: (simple_identifier)
      (parameter_port_list
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (text_macro_usage
                        (simple_identifier)
                        (list_of_actual_arguments
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier)))))))))))))))))
      (list_of_port_declarations
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        (text_macro_usage
                          (simple_identifier)
                          (list_of_actual_arguments
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))))
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (primary_literal
                                        (integral_number
                                          (decimal_number
                                            (unsigned_number))))))))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        (text_macro_usage
                          (simple_identifier)
                          (list_of_actual_arguments
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))))
                            (actual_argument
                              (param_expression
                                (mintypmax_expression
                                  (expression
                                    (primary
                                      (primary_literal
                                        (integral_number
                                          (decimal_number
                                            (unsigned_number))))))))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (variable_port_header
            (port_direction)
            (variable_port_type
              (data_type
                (integer_vector_type)
                (packed_dimension
                  (constant_range
                    (constant_expression
                      (text_macro_usage
                        (simple_identifier)
                        (list_of_actual_arguments
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier)))))))
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (primary_literal
                                      (integral_number
                                        (decimal_number
                                          (unsigned_number))))))))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))))))
          port_name: (simple_identifier))))
    (net_declaration
      (net_type)
      (list_of_net_decl_assignments
        (net_decl_assignment
          (simple_identifier)
          (expression
            (primary
              (hierarchical_identifier
                (simple_identifier)))))))
    (conditional_generate_construct
      (if_generate_construct
        (constant_expression
          left: (constant_expression
            left: (constant_expression
              (constant_primary
                (simple_identifier)))
            right: (constant_expression
              (constant_primary
                (primary_literal
                  (integral_number
                    (decimal_number
                      (unsigned_number)))))))
          right: (constant_expression
            left: (constant_expression
              (constant_primary
                (simple_identifier)))
            right: (constant_expression
              (constant_primary
                (primary_literal
                  (integral_number
                    (decimal_number
                      (unsigned_number))))))))
        (generate_block
          name: (simple_identifier)
          (net_declaration
            (net_type)
            (list_of_net_decl_assignments
              (net_decl_assignment
                (simple_identifier)
                (expression
                  operator: (unary_operator)
                  argument: (primary
                    (concatenation
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))))))))
          (continuous_assign
            (list_of_net_assignments
              (net_assignment
                (net_lvalue
                  (simple_identifier))
                (expression
                  (primary
                    (primary_literal
                      (unbased_unsized_literal))))))))
        (generate_block
          name: (simple_identifier)
          (data_declaration
            (data_type_or_implicit
              (data_type
                (integer_vector_type)
                (packed_dimension
                  (constant_range
                    (constant_expression
                      left: (constant_expression
                        (constant_primary
                          (simple_identifier)))
                      right: (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number)))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))
            (list_of_variable_decl_assignments
              (variable_decl_assignment
                name: (simple_identifier))))
          (data_declaration
            (data_type_or_implicit
              (data_type
                (integer_vector_type)
                (packed_dimension
                  (constant_range
                    (constant_expression
                      left: (constant_expression
                        (constant_primary
                          (simple_identifier)))
                      right: (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number)))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))
            (list_of_variable_decl_assignments
              (variable_decl_assignment
                name: (simple_identifier)
                (unpacked_dimension
                  (constant_range
                    (constant_expression
                      left: (constant_expression
                        (constant_primary
                          (simple_identifier)))
                      right: (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number)))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))))))
          (data_declaration
            (data_type_or_implicit
              (data_type
                (integer_vector_type)))
            (list_of_variable_decl_assignments
              (variable_decl_assignment
                name: (simple_identifier))))
          (net_declaration
            (net_type)
            (data_type_or_implicit
              (implicit_data_type
                (packed_dimension
                  (constant_range
                    (constant_expression
                      left: (constant_expression
                        (constant_primary
                          (simple_identifier)))
                      right: (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number)))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))
            (list_of_net_decl_assignments
              (net_decl_assignment
                (simple_identifier)
                (expression
                  (conditional_expression
                    (expression
                      (primary
                        (mintypmax_expression
                          (expression
                            left: (expression
                              (primary
                                (hierarchical_identifier
                                  (simple_identifier))))
                            right: (expression
                              (primary
                                (primary_literal
                                  (integral_number
                                    (decimal_number
                                      (unsigned_number))))))))))
                    (expression
                      (primary
                        (hierarchical_identifier
                          (simple_identifier))))
                    (expression
                      (primary
                        (primary_literal
                          (unbased_unsized_literal)))))))))
          (continuous_assign
            (list_of_net_assignments
              (net_assignment
                (net_lvalue
                  (simple_identifier))
                (expression
                  left: (expression
                    (primary
                      (hierarchical_identifier
                        (simple_identifier))))
                  right: (expression
                    operator: (unary_operator)
                    argument: (primary
                      (hierarchical_identifier
                        (simple_identifier))))))))
          (always_construct
            (always_keyword)
            (statement
              (statement_item
                (procedural_timing_control_statement
                  (event_control
                    (clocking_event
                      (event_expression
                        (edge_identifier)
                        (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))))
                  (statement_or_null
                    (statement
                      (statement_item
                        (conditional_statement
                          (cond_predicate
                            (expression
                              (primary
                                (hierarchical_identifier
                                  (simple_identifier)))))
                          (statement_or_null
                            (statement
                              (statement_item
                                (nonblocking_assignment
                                  (variable_lvalue
                                    (hierarchical_identifier
                                      (simple_identifier)))
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier))))))))
                          (statement_or_null
                            (statement
                              (statement_item
                                (nonblocking_assignment
                                  (variable_lvalue
                                    (hierarchical_identifier
                                      (simple_identifier)))
                                  (expression
                                    (primary
                                      (primary_literal
                                        (unbased_unsized_literal))))))))))))))))
          (data_declaration
            (data_type_or_implicit
              (data_type
                (integer_vector_type)
                (packed_dimension
                  (constant_range
                    (constant_expression
                      left: (constant_expression
                        (constant_primary
                          (simple_identifier)))
                      right: (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number)))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))
            (list_of_variable_decl_assignments
              (variable_decl_assignment
                name: (simple_identifier))))
          (continuous_assign
            (list_of_net_assignments
              (net_assignment
                (net_lvalue
                  (simple_identifier))
                (expression
                  (primary
                    (hierarchical_identifier
                      (simple_identifier))
                    (select
                      (bit_select
                        (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))))))))
          (conditional_generate_construct
            (if_generate_construct
              (constant_expression
                (constant_primary
                  (simple_identifier)))
              (generate_block
                name: (simple_identifier)
                (data_declaration
                  (data_type_or_implicit
                    (data_type
                      (integer_vector_type)))
                  (list_of_variable_decl_assignments
                    (variable_decl_assignment
                      name: (simple_identifier))))
                (module_instantiation
                  instance_type: (simple_identifier)
                  (parameter_value_assignment
                    (list_of_parameter_value_assignments
                      (named_parameter_assignment
                        (simple_identifier)
                        (param_expression
                          (mintypmax_expression
                            (expression
                              (primary
                                (primary_literal
                                  (integral_number
                                    (decimal_number
                                      (unsigned_number)))))))))))
                  (hierarchical_instance
                    (name_of_instance
                      instance_name: (simple_identifier))
                    (list_of_port_connections
                      (named_port_connection
                        port_name: (simple_identifier)
                        connection: (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))
                      (named_port_connection
                        port_name: (simple_identifier)
                        connection: (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))
                      (named_port_connection
                        port_name: (simple_identifier)
                        connection: (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier))))))))
                (module_instantiation
                  instance_type: (simple_identifier)
                  (parameter_value_assignment
                    (list_of_parameter_value_assignments
                      (named_parameter_assignment
                        (simple_identifier)
                        (param_expression
                          (mintypmax_expression
                            (expression
                              (primary
                                (hierarchical_identifier
                                  (simple_identifier)))))))))
                  (hierarchical_instance
                    (name_of_instance
                      instance_name: (simple_identifier))
                    (list_of_port_connections
                      (named_port_connection
                        port_name: (simple_identifier)
                        connection: (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))
                      (named_port_connection
                        port_name: (simple_identifier)
                        connection: (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))
                      (named_port_connection
                        port_name: (simple_identifier)
                        connection: (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))
                      (named_port_connection
                        port_name: (simple_identifier)
                        connection: (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))))))
              (generate_block
                name: (simple_identifier)
                (continuous_assign
                  (list_of_net_assignments
                    (net_assignment
                      (net_lvalue
                        (simple_identifier))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))))))))
          (one_line_comment)
          (one_line_comment)
          (one_line_comment)
          (one_line_comment)
          (one_line_comment)
          (conditional_compilation_directive
            (ifdef_condition
              (simple_identifier)))
          (data_declaration
            (data_type_or_implicit
              (data_type
                (integer_vector_type)
                (packed_dimension
                  (constant_range
                    (constant_expression
                      left: (constant_expression
                        (constant_primary
                          (simple_identifier)))
                      right: (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number)))))))
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))
            (list_of_variable_decl_assignments
              (variable_decl_assignment
                name: (simple_identifier))))
          (loop_generate_construct
            (genvar_initialization
              (simple_identifier)
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number)))))))
            (constant_expression
              left: (constant_expression
                (constant_primary
                  (simple_identifier)))
              right: (constant_expression
                (constant_primary
                  (simple_identifier))))
            (genvar_iteration
              (simple_identifier)
              (inc_or_dec_operator))
            (generate_block
              name: (simple_identifier)
              (continuous_assign
                (list_of_net_assignments
                  (net_assignment
                    (net_lvalue
                      (simple_identifier)
                      (constant_select
                        (constant_bit_select
                          (constant_expression
                            (constant_primary
                              (simple_identifier))))))
                    (expression
                      (conditional_expression
                        (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier))
                            (select
                              (bit_select
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))))))))
                        (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier))
                            (select
                              (bit_select
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))))))))
                        (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier))
                            (select
                              (bit_select
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier)))))))))))))))
          (one_line_comment)
          (always_construct
            (always_keyword)
            (statement
              (statement_item
                (procedural_timing_control_statement
                  (event_control
                    (clocking_event
                      (event_expression
                        (edge_identifier)
                        (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))))
                  (statement_or_null
                    (statement
                      (statement_item
                        (conditional_statement
                          (cond_predicate
                            (expression
                              left: (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier))))
                              right: (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier))))))
                          (statement_or_null
                            (statement
                              (statement_item
                                (nonblocking_assignment
                                  (variable_lvalue
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier)))))))
                                  (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier))))))))))))))))
          (conditional_compilation_directive)
          (one_line_comment)
          (one_line_comment)
          (text_macro_usage
            (simple_identifier))
          (always_construct
            (always_keyword)
            (statement
              (statement_item
                (procedural_timing_control_statement
                  (event_control
                    (clocking_event
                      (event_expression
                        (edge_identifier)
                        (expression
                          (primary
                            (hierarchical_identifier
                              (simple_identifier)))))))
                  (statement_or_null
                    (statement
                      (statement_item
                        (conditional_statement
                          (cond_predicate
                            (expression
                              left: (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier))))
                              right: (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier))))))
                          (statement_or_null
                            (statement
                              (statement_item
                                (loop_statement
                                  (for_initialization
                                    (for_variable_declaration
                                      (data_type
                                        (integer_atom_type))
                                      (simple_identifier)
                                      (expression
                                        (primary
                                          (primary_literal
                                            (integral_number
                                              (decimal_number
                                                (unsigned_number))))))))
                                  (expression
                                    left: (expression
                                      (primary
                                        (hierarchical_identifier
                                          (simple_identifier))))
                                    right: (expression
                                      (primary
                                        (hierarchical_identifier
                                          (simple_identifier)))))
                                  (for_step
                                    (operator_assignment
                                      (variable_lvalue
                                        (hierarchical_identifier
                                          (simple_identifier)))
                                      (assignment_operator)
                                      (expression
                                        left: (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        right: (expression
                                          (primary
                                            (primary_literal
                                              (integral_number
                                                (decimal_number
                                                  (unsigned_number)))))))))
                                  (statement_or_null
                                    (statement
                                      (statement_item
                                        (conditional_statement
                                          (cond_predicate
                                            (expression
                                              (primary
                                                (hierarchical_identifier
                                                  (simple_identifier))
                                                (select
                                                  (bit_select
                                                    (expression
                                                      (primary
                                                        (hierarchical_identifier
                                                          (simple_identifier)))))))))
                                          (statement_or_null
                                            (statement
                                              (statement_item
                                                (nonblocking_assignment
                                                  (variable_lvalue
                                                    (hierarchical_identifier
                                                      (simple_identifier))
                                                    (select
                                                      (bit_select
                                                        (expression
                                                          (primary
                                                            (hierarchical_identifier
                                                              (simple_identifier))))
                                                        (expression
                                                          (primary
                                                            (hierarchical_identifier
                                                              (simple_identifier)))))))
                                                  (expression
                                                    (primary
                                                      (hierarchical_identifier
                                                        (simple_identifier))
                                                      (select
                                                        (bit_select
                                                          (expression
                                                            (primary
                                                              (hierarchical_identifier
                                                                (simple_identifier))))))))))))))))))))))))))))
          (conditional_compilation_directive)))))
  (text_macro_usage
    (simple_identifier)
    (list_of_actual_arguments
      (actual_argument
        (param_expression
          (mintypmax_expression
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier))))))))))
