============================================
basejump_stl/hard/tsmc_28/bsg_misc/bsg_mux
============================================

`include "bsg_defines.sv"

module bsg_mux #(parameter `BSG_INV_PARAM(width_p)
                 , `BSG_INV_PARAM(els_p)
                 , harden_p = 0
                 , balanced_p = 0
                 , lg_els_lp=`BSG_SAFE_CLOG2(els_p)
                 )
   (
    input [els_p-1:0][width_p-1:0] data_i
    ,input [lg_els_lp-1:0] sel_i
    ,output [width_p-1:0] data_o
    );

   genvar j;

   if ((els_p == 4) && (harden_p == 1) && (balanced_p))
     begin : fi
        for (j = 0; j < width_p; j=j+1)
          begin: rof
             // fast, but not too extreme
             MUX4D4BWP7T30P140ULVT M0 (.I0(data_i[0][j]), .I1(data_i[1][j]), .I2(data_i[2][j]), .I3(data_i[3][j]), .S0(sel_i[0]), .S1(sel_i[1]), .Z(data_o[j]));
          end
     end
   else
     begin : nofi

        if (els_p == 1) begin
          assign data_o = data_i;
          wire unused = sel_i;
        end
        else begin
          assign data_o = data_i[sel_i];
        end


`ifndef BSG_HIDE_FROM_SYNTHESIS
        initial
          assert(balanced_p == 0)
            else $error("%m warning: synthesizable implementation of bsg_mux does not support balanced_p");
`endif
     end

endmodule

`BSG_ABSTRACT_MODULE(bsg_mux)





----

(source_file
  (include_compiler_directive
    (quoted_string
      (quoted_string_item)))
  (module_declaration
    (module_ansi_header
      (module_keyword)
      name: (simple_identifier)
      (parameter_port_list
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier))))))))))
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier))))))))))
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))))
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))))
              (param_assignment
                (simple_identifier)
                (constant_param_expression
                  (constant_mintypmax_expression
                    (constant_expression
                      (text_macro_usage
                        (simple_identifier)
                        (list_of_actual_arguments
                          (actual_argument
                            (param_expression
                              (mintypmax_expression
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier)))))))))))))))))
      (list_of_port_declarations
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))))
    (genvar_declaration
      (list_of_genvar_identifiers
        (simple_identifier)))
    (conditional_generate_construct
      (if_generate_construct
        (constant_expression
          left: (constant_expression
            left: (constant_expression
              (constant_primary
                (constant_mintypmax_expression
                  (constant_expression
                    left: (constant_expression
                      (constant_primary
                        (simple_identifier)))
                    right: (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number))))))))))
            right: (constant_expression
              (constant_primary
                (constant_mintypmax_expression
                  (constant_expression
                    left: (constant_expression
                      (constant_primary
                        (simple_identifier)))
                    right: (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))))))
          right: (constant_expression
            (constant_primary
              (constant_mintypmax_expression
                (constant_expression
                  (constant_primary
                    (simple_identifier)))))))
        (generate_block
          name: (simple_identifier)
          (loop_generate_construct
            (genvar_initialization
              (simple_identifier)
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number)))))))
            (constant_expression
              left: (constant_expression
                (constant_primary
                  (simple_identifier)))
              right: (constant_expression
                (constant_primary
                  (simple_identifier))))
            (genvar_iteration
              (simple_identifier)
              (assignment_operator)
              (constant_expression
                left: (constant_expression
                  (constant_primary
                    (simple_identifier)))
                right: (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))
            (generate_block
              name: (simple_identifier)
              (one_line_comment)
              (module_instantiation
                instance_type: (simple_identifier)
                (hierarchical_instance
                  (name_of_instance
                    instance_name: (simple_identifier))
                  (list_of_port_connections
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (primary_literal
                                    (integral_number
                                      (decimal_number
                                        (unsigned_number))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (primary_literal
                                    (integral_number
                                      (decimal_number
                                        (unsigned_number))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (primary_literal
                                    (integral_number
                                      (decimal_number
                                        (unsigned_number))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (primary_literal
                                    (integral_number
                                      (decimal_number
                                        (unsigned_number))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (primary_literal
                                    (integral_number
                                      (decimal_number
                                        (unsigned_number)))))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (primary_literal
                                    (integral_number
                                      (decimal_number
                                        (unsigned_number)))))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))))))
        (generate_block
          name: (simple_identifier)
          (conditional_generate_construct
            (if_generate_construct
              (constant_expression
                left: (constant_expression
                  (constant_primary
                    (simple_identifier)))
                right: (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number)))))))
              (generate_block
                (continuous_assign
                  (list_of_net_assignments
                    (net_assignment
                      (net_lvalue
                        (simple_identifier))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))))
                (net_declaration
                  (net_type)
                  (list_of_net_decl_assignments
                    (net_decl_assignment
                      (simple_identifier)
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))))))
              (generate_block
                (continuous_assign
                  (list_of_net_assignments
                    (net_assignment
                      (net_lvalue
                        (simple_identifier))
                      (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier))))))))))))))
          (conditional_compilation_directive
            (ifdef_condition
              (simple_identifier)))
          (initial_construct
            (statement_or_null
              (statement
                (statement_item
                  (simple_immediate_assert_statement
                    (expression
                      left: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))))
                      right: (expression
                        (primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number)))))))
                    (action_block
                      (statement_or_null
                        (statement
                          (statement_item
                            (subroutine_call_statement
                              (severity_system_task
                                (list_of_arguments
                                  (expression
                                    (primary
                                      (primary_literal
                                        (string_literal
                                          (quoted_string
                                            (quoted_string_item))))))))))))))))))
          (conditional_compilation_directive)))))
  (text_macro_usage
    (simple_identifier)
    (list_of_actual_arguments
      (actual_argument
        (param_expression
          (mintypmax_expression
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier))))))))))
