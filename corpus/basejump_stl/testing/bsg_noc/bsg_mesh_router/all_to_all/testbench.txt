============================================
basejump_stl/testing/bsg_noc/bsg_mesh_router/all_to_all/testbench
============================================


`include "bsg_defines.sv"

module testbench();

  import test_pkg::*;
  import bsg_noc_pkg::*;
  import bsg_mesh_router_pkg::*;

  bit clk;
  bit reset;

  bsg_nonsynth_clock_gen #(
    .cycle_time_p(10)
  ) cg0 (.o(clk)); 


  bsg_nonsynth_reset_gen #(
    .reset_cycles_lo_p(0)
    ,.reset_cycles_hi_p(4)
  ) rg0 (
    .clk_i(clk)
    ,.async_reset_o(reset)
  );


  localparam num_tiles_x_p = `NUM_X;
  localparam num_tiles_y_p = `NUM_Y;
  localparam dims_p = `DIMS_P;
  localparam ruche_factor_X_p = `RUCHE_X;
  localparam ruche_factor_Y_p = `RUCHE_Y;
  localparam XY_order_p = `XY_ORDER;
  localparam dirs_lp = (dims_p*2)+1;
  localparam data_width_p = 32;
  localparam depopulated_p = `DEPOPULATED;
  localparam x_cord_width_lp = `BSG_SAFE_CLOG2(num_tiles_x_p);
  localparam y_cord_width_lp = `BSG_SAFE_CLOG2(num_tiles_y_p);

  // Print out test configurations
  initial begin
    $display("TEST CONFIGURATIONS:");
    $display("num_tiles_x_p = %d", num_tiles_x_p);
    $display("num_tiles_y_p = %d", num_tiles_y_p);
    $display("dims_p = %d", dims_p);
    $display("ruche_factor_X_p = %d", ruche_factor_X_p);
    $display("ruche_factor_Y_p = %d", ruche_factor_Y_p);
    $display("XY_order_p = %d", XY_order_p);
    $display("depopulated_p = %d", depopulated_p);
  end


  `declare_test_link_sif_s(data_width_p,x_cord_width_lp,y_cord_width_lp);
  test_link_sif_s [num_tiles_y_p-1:0][num_tiles_x_p-1:0][dirs_lp-1:W] link_li;
  test_link_sif_s [num_tiles_y_p-1:0][num_tiles_x_p-1:0][dirs_lp-1:W] link_lo;
  logic [num_tiles_y_p-1:0][num_tiles_x_p-1:0] done_lo;


  for (genvar y = 0; y < num_tiles_y_p; y++) begin: ty
    for (genvar x = 0; x < num_tiles_x_p; x++) begin: tx
      test_tile #(
        .dims_p(dims_p)
        ,.x_cord_width_p(x_cord_width_lp)
        ,.y_cord_width_p(y_cord_width_lp)
        ,.num_tiles_x_p(num_tiles_x_p)
        ,.num_tiles_y_p(num_tiles_y_p)
        ,.data_width_p(data_width_p)
        ,.ruche_factor_X_p(ruche_factor_X_p)
        ,.ruche_factor_Y_p(ruche_factor_Y_p)
        ,.XY_order_p(XY_order_p)
        ,.depopulated_p(depopulated_p)
      ) tile (
        .clk_i(clk)
        ,.reset_i(reset)
    
        ,.link_i(link_li[y][x])
        ,.link_o(link_lo[y][x])
    
        ,.my_x_i((x_cord_width_lp)'(x))
        ,.my_y_i((y_cord_width_lp)'(y))

        ,.done_o(done_lo[y][x])
      );
    end
  end


  for (genvar y = 0; y < num_tiles_y_p; y++) begin
    for (genvar x = 0; x < num_tiles_x_p; x++) begin

      // connect local
      if (dims_p >= 2) begin
        // west
        if (x == 0) begin
          assign link_li[y][x][W] = '0;
        end
        else begin
          assign link_li[y][x][W] = link_lo[y][x-1][E];
        end

        // east
        if (x == num_tiles_x_p-1) begin
          assign link_li[y][x][E] = '0;
        end
        else begin
          assign link_li[y][x][E] = link_lo[y][x+1][W];
        end

        // north
        if (y == 0) begin
          assign link_li[y][x][N] = '0;
        end
        else begin
          assign link_li[y][x][N] = link_lo[y-1][x][S];
        end

        // south
        if (y == num_tiles_y_p-1) begin
          assign link_li[y][x][S] = '0;
        end
        else begin
          assign link_li[y][x][S] = link_lo[y+1][x][N];
        end
      end

      // connect ruche x
      if (dims_p >= 3) begin
        // RW
        if (x >= ruche_factor_X_p) begin
          assign link_li[y][x][RW] = link_lo[y][x-ruche_factor_X_p][RE];
        end
        else begin
          assign link_li[y][x][RW] = '0;
        end

        // RE
        if (x < num_tiles_x_p - ruche_factor_X_p) begin
          assign link_li[y][x][RE] = link_lo[y][x+ruche_factor_X_p][RW];
        end
        else begin
          assign link_li[y][x][RE] = '0;
        end
      end

      // connect ruche y
      if (dims_p == 4) begin
        // RN
        if (y >= ruche_factor_Y_p) begin
          assign link_li[y][x][RN] = link_lo[y-ruche_factor_Y_p][x][RS];
        end
        else begin
          assign link_li[y][x][RN] = '0;
        end

        // RS
        if (y < num_tiles_y_p - ruche_factor_Y_p) begin
          assign link_li[y][x][RS] = link_lo[y+ruche_factor_Y_p][x][RN];
        end
        else begin
          assign link_li[y][x][RS] = '0;
        end

      end

    end
  end





  initial begin
    wait(&done_lo);
    $display("[BSG_FINISH] test successful.");
    $finish;
  end


endmodule

----

(source_file
  (include_compiler_directive
    (quoted_string
      (quoted_string_item)))
  (module_declaration
    (module_nonansi_header
      (module_keyword)
      name: (simple_identifier)
      (list_of_ports))
    (module_item
      (data_declaration
        (package_import_declaration
          (package_import_item
            (simple_identifier)))))
    (module_item
      (data_declaration
        (package_import_declaration
          (package_import_item
            (simple_identifier)))))
    (module_item
      (data_declaration
        (package_import_declaration
          (package_import_item
            (simple_identifier)))))
    (module_item
      (data_declaration
        (data_type_or_implicit
          (data_type
            (integer_vector_type)))
        (list_of_variable_decl_assignments
          (variable_decl_assignment
            name: (simple_identifier)))))
    (module_item
      (data_declaration
        (data_type_or_implicit
          (data_type
            (integer_vector_type)))
        (list_of_variable_decl_assignments
          (variable_decl_assignment
            name: (simple_identifier)))))
    (module_item
      (module_instantiation
        instance_type: (simple_identifier)
        (parameter_value_assignment
          (list_of_parameter_value_assignments
            (named_parameter_assignment
              (simple_identifier)
              (param_expression
                (mintypmax_expression
                  (expression
                    (primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))))))
        (hierarchical_instance
          (name_of_instance
            instance_name: (simple_identifier))
          (list_of_port_connections
            (named_port_connection
              port_name: (simple_identifier)
              connection: (expression
                (primary
                  (hierarchical_identifier
                    (simple_identifier)))))))))
    (module_item
      (module_instantiation
        instance_type: (simple_identifier)
        (parameter_value_assignment
          (list_of_parameter_value_assignments
            (named_parameter_assignment
              (simple_identifier)
              (param_expression
                (mintypmax_expression
                  (expression
                    (primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))))
            (named_parameter_assignment
              (simple_identifier)
              (param_expression
                (mintypmax_expression
                  (expression
                    (primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))))))
        (hierarchical_instance
          (name_of_instance
            instance_name: (simple_identifier))
          (list_of_port_connections
            (named_port_connection
              port_name: (simple_identifier)
              connection: (expression
                (primary
                  (hierarchical_identifier
                    (simple_identifier)))))
            (named_port_connection
              port_name: (simple_identifier)
              connection: (expression
                (primary
                  (hierarchical_identifier
                    (simple_identifier)))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (constant_mintypmax_expression
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            (constant_primary
                              (primary_literal
                                (integral_number
                                  (decimal_number
                                    (unsigned_number))))))))))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)
                    (list_of_actual_arguments
                      (actual_argument
                        (param_expression
                          (mintypmax_expression
                            (expression
                              (primary
                                (hierarchical_identifier
                                  (simple_identifier))))))))))))))))
    (module_item
      (local_parameter_declaration
        (list_of_param_assignments
          (param_assignment
            (simple_identifier)
            (constant_param_expression
              (constant_mintypmax_expression
                (constant_expression
                  (text_macro_usage
                    (simple_identifier)
                    (list_of_actual_arguments
                      (actual_argument
                        (param_expression
                          (mintypmax_expression
                            (expression
                              (primary
                                (hierarchical_identifier
                                  (simple_identifier))))))))))))))))
    (one_line_comment)
    (module_item
      (initial_construct
        (statement_or_null
          (statement
            (statement_item
              (seq_block
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item)))))))))))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item))))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))))))))
    (module_item
      (text_macro_usage
        (simple_identifier)
        (list_of_actual_arguments
          (actual_argument
            (param_expression
              (mintypmax_expression
                (expression
                  (primary
                    (hierarchical_identifier
                      (simple_identifier)))))))
          (actual_argument
            (param_expression
              (mintypmax_expression
                (expression
                  (primary
                    (hierarchical_identifier
                      (simple_identifier)))))))
          (actual_argument
            (param_expression
              (mintypmax_expression
                (expression
                  (primary
                    (hierarchical_identifier
                      (simple_identifier))))))))))
    (module_item)
    (module_item
      (data_declaration
        (data_type_or_implicit
          (data_type
            (simple_identifier)
            (packed_dimension
              (constant_range
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (simple_identifier)))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))
                (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))
            (packed_dimension
              (constant_range
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (simple_identifier)))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))
                (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))
            (packed_dimension
              (constant_range
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (simple_identifier)))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))
                (constant_expression
                  (constant_primary
                    (simple_identifier)))))))
        (list_of_variable_decl_assignments
          (variable_decl_assignment
            name: (simple_identifier)))))
    (module_item
      (data_declaration
        (data_type_or_implicit
          (data_type
            (simple_identifier)
            (packed_dimension
              (constant_range
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (simple_identifier)))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))
                (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))
            (packed_dimension
              (constant_range
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (simple_identifier)))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))
                (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))
            (packed_dimension
              (constant_range
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (simple_identifier)))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))
                (constant_expression
                  (constant_primary
                    (simple_identifier)))))))
        (list_of_variable_decl_assignments
          (variable_decl_assignment
            name: (simple_identifier)))))
    (module_item
      (data_declaration
        (data_type_or_implicit
          (data_type
            (integer_vector_type)
            (packed_dimension
              (constant_range
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (simple_identifier)))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))
                (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))
            (packed_dimension
              (constant_range
                (constant_expression
                  left: (constant_expression
                    (constant_primary
                      (simple_identifier)))
                  right: (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))
                (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number))))))))))
        (list_of_variable_decl_assignments
          (variable_decl_assignment
            name: (simple_identifier)))))
    (module_item
      (loop_generate_construct
        (genvar_initialization
          (simple_identifier)
          (constant_expression
            (constant_primary
              (primary_literal
                (integral_number
                  (decimal_number
                    (unsigned_number)))))))
        (constant_expression
          left: (constant_expression
            (constant_primary
              (simple_identifier)))
          right: (constant_expression
            (constant_primary
              (simple_identifier))))
        (genvar_iteration
          (simple_identifier)
          (inc_or_dec_operator))
        (generate_block
          name: (simple_identifier)
          (loop_generate_construct
            (genvar_initialization
              (simple_identifier)
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number)))))))
            (constant_expression
              left: (constant_expression
                (constant_primary
                  (simple_identifier)))
              right: (constant_expression
                (constant_primary
                  (simple_identifier))))
            (genvar_iteration
              (simple_identifier)
              (inc_or_dec_operator))
            (generate_block
              name: (simple_identifier)
              (module_instantiation
                instance_type: (simple_identifier)
                (parameter_value_assignment
                  (list_of_parameter_value_assignments
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))
                    (named_parameter_assignment
                      (simple_identifier)
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))
                (hierarchical_instance
                  (name_of_instance
                    instance_name: (simple_identifier))
                  (list_of_port_connections
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier)))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (cast
                            (casting_type
                              (constant_mintypmax_expression
                                (constant_expression
                                  (constant_primary
                                    (simple_identifier)))))
                            (expression
                              (primary
                                (hierarchical_identifier
                                  (simple_identifier))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (cast
                            (casting_type
                              (constant_mintypmax_expression
                                (constant_expression
                                  (constant_primary
                                    (simple_identifier)))))
                            (expression
                              (primary
                                (hierarchical_identifier
                                  (simple_identifier))))))))
                    (named_port_connection
                      port_name: (simple_identifier)
                      connection: (expression
                        (primary
                          (hierarchical_identifier
                            (simple_identifier))
                          (select
                            (bit_select
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier))))
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))))))))))))))
    (module_item
      (loop_generate_construct
        (genvar_initialization
          (simple_identifier)
          (constant_expression
            (constant_primary
              (primary_literal
                (integral_number
                  (decimal_number
                    (unsigned_number)))))))
        (constant_expression
          left: (constant_expression
            (constant_primary
              (simple_identifier)))
          right: (constant_expression
            (constant_primary
              (simple_identifier))))
        (genvar_iteration
          (simple_identifier)
          (inc_or_dec_operator))
        (generate_block
          (loop_generate_construct
            (genvar_initialization
              (simple_identifier)
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number)))))))
            (constant_expression
              left: (constant_expression
                (constant_primary
                  (simple_identifier)))
              right: (constant_expression
                (constant_primary
                  (simple_identifier))))
            (genvar_iteration
              (simple_identifier)
              (inc_or_dec_operator))
            (generate_block
              (one_line_comment)
              (conditional_generate_construct
                (if_generate_construct
                  (constant_expression
                    left: (constant_expression
                      (constant_primary
                        (simple_identifier)))
                    right: (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))
                  (generate_block
                    (one_line_comment)
                    (conditional_generate_construct
                      (if_generate_construct
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            (constant_primary
                              (primary_literal
                                (integral_number
                                  (decimal_number
                                    (unsigned_number)))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (primary_literal
                                      (unbased_unsized_literal))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        (expression
                                          left: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))))
                                          right: (expression
                                            (primary
                                              (primary_literal
                                                (integral_number
                                                  (decimal_number
                                                    (unsigned_number)))))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))))))))))))
                    (one_line_comment)
                    (conditional_generate_construct
                      (if_generate_construct
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            left: (constant_expression
                              (constant_primary
                                (simple_identifier)))
                            right: (constant_expression
                              (constant_primary
                                (primary_literal
                                  (integral_number
                                    (decimal_number
                                      (unsigned_number))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (primary_literal
                                      (unbased_unsized_literal))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        (expression
                                          left: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))))
                                          right: (expression
                                            (primary
                                              (primary_literal
                                                (integral_number
                                                  (decimal_number
                                                    (unsigned_number)))))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))))))))))))
                    (one_line_comment)
                    (conditional_generate_construct
                      (if_generate_construct
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            (constant_primary
                              (primary_literal
                                (integral_number
                                  (decimal_number
                                    (unsigned_number)))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (primary_literal
                                      (unbased_unsized_literal))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          left: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))))
                                          right: (expression
                                            (primary
                                              (primary_literal
                                                (integral_number
                                                  (decimal_number
                                                    (unsigned_number)))))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))))))))))))
                    (one_line_comment)
                    (conditional_generate_construct
                      (if_generate_construct
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            left: (constant_expression
                              (constant_primary
                                (simple_identifier)))
                            right: (constant_expression
                              (constant_primary
                                (primary_literal
                                  (integral_number
                                    (decimal_number
                                      (unsigned_number))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (primary_literal
                                      (unbased_unsized_literal))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          left: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))))
                                          right: (expression
                                            (primary
                                              (primary_literal
                                                (integral_number
                                                  (decimal_number
                                                    (unsigned_number)))))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier)))))))))))))))))
              (one_line_comment)
              (conditional_generate_construct
                (if_generate_construct
                  (constant_expression
                    left: (constant_expression
                      (constant_primary
                        (simple_identifier)))
                    right: (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))
                  (generate_block
                    (one_line_comment)
                    (conditional_generate_construct
                      (if_generate_construct
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            (constant_primary
                              (simple_identifier))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        (expression
                                          left: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))))
                                          right: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier)))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (primary_literal
                                      (unbased_unsized_literal))))))))))
                    (one_line_comment)
                    (conditional_generate_construct
                      (if_generate_construct
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            left: (constant_expression
                              (constant_primary
                                (simple_identifier)))
                            right: (constant_expression
                              (constant_primary
                                (simple_identifier)))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        (expression
                                          left: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))))
                                          right: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier)))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (primary_literal
                                      (unbased_unsized_literal)))))))))))))
              (one_line_comment)
              (conditional_generate_construct
                (if_generate_construct
                  (constant_expression
                    left: (constant_expression
                      (constant_primary
                        (simple_identifier)))
                    right: (constant_expression
                      (constant_primary
                        (primary_literal
                          (integral_number
                            (decimal_number
                              (unsigned_number)))))))
                  (generate_block
                    (one_line_comment)
                    (conditional_generate_construct
                      (if_generate_construct
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            (constant_primary
                              (simple_identifier))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          left: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))))
                                          right: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier)))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (primary_literal
                                      (unbased_unsized_literal))))))))))
                    (one_line_comment)
                    (conditional_generate_construct
                      (if_generate_construct
                        (constant_expression
                          left: (constant_expression
                            (constant_primary
                              (simple_identifier)))
                          right: (constant_expression
                            left: (constant_expression
                              (constant_primary
                                (simple_identifier)))
                            right: (constant_expression
                              (constant_primary
                                (simple_identifier)))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))
                                    (select
                                      (bit_select
                                        (expression
                                          left: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier))))
                                          right: (expression
                                            (primary
                                              (hierarchical_identifier
                                                (simple_identifier)))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))
                                        (expression
                                          (primary
                                            (hierarchical_identifier
                                              (simple_identifier))))))))))))
                        (generate_block
                          (continuous_assign
                            (list_of_net_assignments
                              (net_assignment
                                (net_lvalue
                                  (simple_identifier)
                                  (constant_select
                                    (constant_bit_select
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier)))
                                      (constant_expression
                                        (constant_primary
                                          (simple_identifier))))))
                                (expression
                                  (primary
                                    (primary_literal
                                      (unbased_unsized_literal))))))))))))))))))
    (module_item
      (initial_construct
        (statement_or_null
          (statement
            (statement_item
              (seq_block
                (statement_or_null
                  (statement
                    (statement_item
                      (wait_statement
                        (expression
                          operator: (unary_operator)
                          argument: (primary
                            (hierarchical_identifier
                              (simple_identifier))))
                        (statement_or_null)))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (subroutine_call
                          (system_tf_call
                            (system_tf_identifier)
                            (list_of_arguments
                              (expression
                                (primary
                                  (primary_literal
                                    (string_literal
                                      (quoted_string
                                        (quoted_string_item)))))))))))))
                (statement_or_null
                  (statement
                    (statement_item
                      (subroutine_call_statement
                        (simulation_control_task)))))))))))))
