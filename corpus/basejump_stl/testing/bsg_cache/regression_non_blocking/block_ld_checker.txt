============================================
basejump_stl/testing/bsg_cache/regression_non_blocking/block_ld_checker
============================================


`include "bsg_cache_non_blocking.svh"

module block_ld_checker
  import bsg_cache_non_blocking_pkg::*;
  #(parameter `BSG_INV_PARAM(data_width_p)
    , parameter `BSG_INV_PARAM(id_width_p)
    , parameter `BSG_INV_PARAM(addr_width_p)
    , parameter `BSG_INV_PARAM(block_size_in_words_p)
    , parameter `BSG_INV_PARAM(cache_pkt_width_lp)
    , parameter `BSG_INV_PARAM(mem_size_p)
  )
  (
    input clk_i
    , input reset_i
    , input en_i  
  
    , input v_i
    , input ready_o
    , input [cache_pkt_width_lp-1:0] cache_pkt_i

    , input v_o
    , input yumi_i
    , input [data_width_p-1:0] data_o
    , input [id_width_p-1:0] id_o
  );

  `declare_bsg_cache_non_blocking_pkt_s(id_width_p,addr_width_p,data_width_p);
  bsg_cache_non_blocking_pkt_s cache_pkt;
  assign cache_pkt = cache_pkt_i;

  // consistency checking
  logic [data_width_p-1:0] shadow_mem [mem_size_p-1:0];    // indexed by addr.
  logic [block_size_in_words_p-1:0][data_width_p-1:0] result [*]; // indexed by id.
  integer load_idx [*];

  always_ff @ (posedge clk_i) begin

    if (reset_i) begin

      for (integer i = 0; i < mem_size_p; i++)
        shadow_mem[i] <= '0;

    end
    else begin    
      if (v_i & ready_o & en_i) begin

        if (cache_pkt.opcode == TAGST) begin
          result[cache_pkt.id][0] = '0;
        end
        else if (cache_pkt.opcode == BLOCK_LD) begin
          for (integer i = 0; i < block_size_in_words_p; i++)
            result[cache_pkt.id][i] = shadow_mem[cache_pkt.addr[2+:`BSG_SAFE_CLOG2(mem_size_p)]+i];
          load_idx[cache_pkt.id] = 0;
        end
        else if (cache_pkt.opcode == SW) begin
          shadow_mem[cache_pkt.addr[2+:`BSG_SAFE_CLOG2(mem_size_p)]] = cache_pkt.data;
          result[cache_pkt.id][0] = '0;
        end
        else if (cache_pkt.opcode == LW) begin
          result[cache_pkt.id][0] = shadow_mem[cache_pkt.addr[2+:`BSG_SAFE_CLOG2(mem_size_p)]];
        end
        else if (cache_pkt.opcode == AFLINV) begin
          result[cache_pkt.id][0] = '0;
        end

      end
    end


    if (~reset_i & v_o & yumi_i & en_i) begin

      $display("id=%d, data=%x", id_o, data_o);

      if (load_idx.exists(id_o)) begin
        assert(result[id_o][load_idx[id_o]] == data_o)
          else $fatal(1, "Output does not match expected result. Id= %d, Expected: %x. Actual: %x",
                id_o, result[id_o][load_idx[id_o]], data_o);
        load_idx[id_o]++;
      end
      else begin
        assert(result[id_o][0] == data_o)
          else $fatal(1, "Output does not match expected result. Id= %d, Expected: %x. Actual: %x",
                id_o, result[id_o][0], data_o);
      end
    end

  end

endmodule

`BSG_ABSTRACT_MODULE(block_ld_checker)

----

(source_file
  (include_compiler_directive
    (quoted_string
      (quoted_string_item)))
  (module_declaration
    (module_ansi_header
      (module_keyword)
      name: (simple_identifier)
      (package_import_declaration
        (package_import_item
          (simple_identifier)))
      (parameter_port_list
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier)))))))))))))
        (parameter_port_declaration
          (parameter_declaration
            (list_of_param_assignments
              (param_assignment
                (text_macro_usage
                  (simple_identifier)
                  (list_of_actual_arguments
                    (actual_argument
                      (param_expression
                        (mintypmax_expression
                          (expression
                            (primary
                              (hierarchical_identifier
                                (simple_identifier))))))))))))))
      (list_of_port_declarations
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))
        (ansi_port_declaration
          (net_port_header
            (port_direction)
            (net_port_type
              (data_type_or_implicit
                (implicit_data_type
                  (packed_dimension
                    (constant_range
                      (constant_expression
                        left: (constant_expression
                          (constant_primary
                            (simple_identifier)))
                        right: (constant_expression
                          (constant_primary
                            (primary_literal
                              (integral_number
                                (decimal_number
                                  (unsigned_number)))))))
                      (constant_expression
                        (constant_primary
                          (primary_literal
                            (integral_number
                              (decimal_number
                                (unsigned_number))))))))))))
          port_name: (simple_identifier))))
    (text_macro_usage
      (simple_identifier)
      (list_of_actual_arguments
        (actual_argument
          (param_expression
            (mintypmax_expression
              (expression
                (primary
                  (hierarchical_identifier
                    (simple_identifier)))))))
        (actual_argument
          (param_expression
            (mintypmax_expression
              (expression
                (primary
                  (hierarchical_identifier
                    (simple_identifier)))))))
        (actual_argument
          (param_expression
            (mintypmax_expression
              (expression
                (primary
                  (hierarchical_identifier
                    (simple_identifier)))))))))
    (net_declaration
      (simple_identifier)
      (list_of_net_decl_assignments
        (net_decl_assignment
          (simple_identifier))))
    (continuous_assign
      (list_of_net_assignments
        (net_assignment
          (net_lvalue
            (simple_identifier))
          (expression
            (primary
              (hierarchical_identifier
                (simple_identifier)))))))
    (one_line_comment)
    (data_declaration
      (data_type_or_implicit
        (data_type
          (integer_vector_type)
          (packed_dimension
            (constant_range
              (constant_expression
                left: (constant_expression
                  (constant_primary
                    (simple_identifier)))
                right: (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number)))))))
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number))))))))))
      (list_of_variable_decl_assignments
        (variable_decl_assignment
          name: (simple_identifier)
          (unpacked_dimension
            (constant_range
              (constant_expression
                left: (constant_expression
                  (constant_primary
                    (simple_identifier)))
                right: (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number)))))))
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number)))))))))))
    (one_line_comment)
    (data_declaration
      (data_type_or_implicit
        (data_type
          (integer_vector_type)
          (packed_dimension
            (constant_range
              (constant_expression
                left: (constant_expression
                  (constant_primary
                    (simple_identifier)))
                right: (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number)))))))
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number))))))))
          (packed_dimension
            (constant_range
              (constant_expression
                left: (constant_expression
                  (constant_primary
                    (simple_identifier)))
                right: (constant_expression
                  (constant_primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number)))))))
              (constant_expression
                (constant_primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number))))))))))
      (list_of_variable_decl_assignments
        (variable_decl_assignment
          name: (simple_identifier)
          (associative_dimension))))
    (one_line_comment)
    (data_declaration
      (data_type_or_implicit
        (data_type
          (integer_atom_type)))
      (list_of_variable_decl_assignments
        (variable_decl_assignment
          name: (simple_identifier)
          (associative_dimension))))
    (always_construct
      (always_keyword)
      (statement
        (statement_item
          (procedural_timing_control_statement
            (event_control
              (clocking_event
                (event_expression
                  (edge_identifier)
                  (expression
                    (primary
                      (hierarchical_identifier
                        (simple_identifier)))))))
            (statement_or_null
              (statement
                (statement_item
                  (seq_block
                    (statement_or_null
                      (statement
                        (statement_item
                          (conditional_statement
                            (cond_predicate
                              (expression
                                (primary
                                  (hierarchical_identifier
                                    (simple_identifier)))))
                            (statement_or_null
                              (statement
                                (statement_item
                                  (seq_block
                                    (statement_or_null
                                      (statement
                                        (statement_item
                                          (loop_statement
                                            (for_initialization
                                              (for_variable_declaration
                                                (data_type
                                                  (integer_atom_type))
                                                (simple_identifier)
                                                (expression
                                                  (primary
                                                    (primary_literal
                                                      (integral_number
                                                        (decimal_number
                                                          (unsigned_number))))))))
                                            (expression
                                              left: (expression
                                                (primary
                                                  (hierarchical_identifier
                                                    (simple_identifier))))
                                              right: (expression
                                                (primary
                                                  (hierarchical_identifier
                                                    (simple_identifier)))))
                                            (for_step
                                              (inc_or_dec_expression
                                                (variable_lvalue
                                                  (hierarchical_identifier
                                                    (simple_identifier)))
                                                (inc_or_dec_operator)))
                                            (statement_or_null
                                              (statement
                                                (statement_item
                                                  (nonblocking_assignment
                                                    (variable_lvalue
                                                      (hierarchical_identifier
                                                        (simple_identifier))
                                                      (select
                                                        (bit_select
                                                          (expression
                                                            (primary
                                                              (hierarchical_identifier
                                                                (simple_identifier)))))))
                                                    (expression
                                                      (primary
                                                        (primary_literal
                                                          (unbased_unsized_literal))))))))))))))))
                            (statement_or_null
                              (statement
                                (statement_item
                                  (seq_block
                                    (statement_or_null
                                      (statement
                                        (statement_item
                                          (conditional_statement
                                            (cond_predicate
                                              (expression
                                                left: (expression
                                                  left: (expression
                                                    (primary
                                                      (hierarchical_identifier
                                                        (simple_identifier))))
                                                  right: (expression
                                                    (primary
                                                      (hierarchical_identifier
                                                        (simple_identifier)))))
                                                right: (expression
                                                  (primary
                                                    (hierarchical_identifier
                                                      (simple_identifier))))))
                                            (statement_or_null
                                              (statement
                                                (statement_item
                                                  (seq_block
                                                    (statement_or_null
                                                      (statement
                                                        (statement_item
                                                          (conditional_statement
                                                            (cond_predicate
                                                              (expression
                                                                left: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier)
                                                                      (simple_identifier))))
                                                                right: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier))))))
                                                            (statement_or_null
                                                              (statement
                                                                (statement_item
                                                                  (seq_block
                                                                    (statement_or_null
                                                                      (statement
                                                                        (statement_item
                                                                          (blocking_assignment
                                                                            (operator_assignment
                                                                              (variable_lvalue
                                                                                (hierarchical_identifier
                                                                                  (simple_identifier))
                                                                                (select
                                                                                  (bit_select
                                                                                    (expression
                                                                                      (primary
                                                                                        (function_subroutine_call
                                                                                          (subroutine_call
                                                                                            (method_call
                                                                                              (primary
                                                                                                (hierarchical_identifier
                                                                                                  (simple_identifier)))
                                                                                              (method_call_body
                                                                                                name: (simple_identifier)))))))
                                                                                    (expression
                                                                                      (primary
                                                                                        (primary_literal
                                                                                          (integral_number
                                                                                            (decimal_number
                                                                                              (unsigned_number)))))))))
                                                                              (assignment_operator)
                                                                              (expression
                                                                                (primary
                                                                                  (primary_literal
                                                                                    (unbased_unsized_literal)))))))))))))
                                                            (cond_predicate
                                                              (expression
                                                                left: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier)
                                                                      (simple_identifier))))
                                                                right: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier))))))
                                                            (statement_or_null
                                                              (statement
                                                                (statement_item
                                                                  (seq_block
                                                                    (statement_or_null
                                                                      (statement
                                                                        (statement_item
                                                                          (loop_statement
                                                                            (for_initialization
                                                                              (for_variable_declaration
                                                                                (data_type
                                                                                  (integer_atom_type))
                                                                                (simple_identifier)
                                                                                (expression
                                                                                  (primary
                                                                                    (primary_literal
                                                                                      (integral_number
                                                                                        (decimal_number
                                                                                          (unsigned_number))))))))
                                                                            (expression
                                                                              left: (expression
                                                                                (primary
                                                                                  (hierarchical_identifier
                                                                                    (simple_identifier))))
                                                                              right: (expression
                                                                                (primary
                                                                                  (hierarchical_identifier
                                                                                    (simple_identifier)))))
                                                                            (for_step
                                                                              (inc_or_dec_expression
                                                                                (variable_lvalue
                                                                                  (hierarchical_identifier
                                                                                    (simple_identifier)))
                                                                                (inc_or_dec_operator)))
                                                                            (statement_or_null
                                                                              (statement
                                                                                (statement_item
                                                                                  (blocking_assignment
                                                                                    (operator_assignment
                                                                                      (variable_lvalue
                                                                                        (hierarchical_identifier
                                                                                          (simple_identifier))
                                                                                        (select
                                                                                          (bit_select
                                                                                            (expression
                                                                                              (primary
                                                                                                (function_subroutine_call
                                                                                                  (subroutine_call
                                                                                                    (method_call
                                                                                                      (primary
                                                                                                        (hierarchical_identifier
                                                                                                          (simple_identifier)))
                                                                                                      (method_call_body
                                                                                                        name: (simple_identifier)))))))
                                                                                            (expression
                                                                                              (primary
                                                                                                (hierarchical_identifier
                                                                                                  (simple_identifier)))))))
                                                                                      (assignment_operator)
                                                                                      (expression
                                                                                        (primary
                                                                                          (hierarchical_identifier
                                                                                            (simple_identifier))
                                                                                          (select
                                                                                            (bit_select
                                                                                              (expression
                                                                                                left: (expression
                                                                                                  (primary
                                                                                                    (hierarchical_identifier
                                                                                                      (simple_identifier))
                                                                                                    (select
                                                                                                      (simple_identifier)
                                                                                                      (indexed_range
                                                                                                        (expression
                                                                                                          (primary
                                                                                                            (primary_literal
                                                                                                              (integral_number
                                                                                                                (decimal_number
                                                                                                                  (unsigned_number))))))
                                                                                                        (constant_expression
                                                                                                          (text_macro_usage
                                                                                                            (simple_identifier)
                                                                                                            (list_of_actual_arguments
                                                                                                              (actual_argument
                                                                                                                (param_expression
                                                                                                                  (mintypmax_expression
                                                                                                                    (expression
                                                                                                                      (primary
                                                                                                                        (hierarchical_identifier
                                                                                                                          (simple_identifier))))))))))))))
                                                                                                right: (expression
                                                                                                  (primary
                                                                                                    (hierarchical_identifier
                                                                                                      (simple_identifier))))))))))))))))))
                                                                    (statement_or_null
                                                                      (statement
                                                                        (statement_item
                                                                          (blocking_assignment
                                                                            (operator_assignment
                                                                              (variable_lvalue
                                                                                (hierarchical_identifier
                                                                                  (simple_identifier))
                                                                                (select
                                                                                  (bit_select
                                                                                    (expression
                                                                                      (primary
                                                                                        (function_subroutine_call
                                                                                          (subroutine_call
                                                                                            (method_call
                                                                                              (primary
                                                                                                (hierarchical_identifier
                                                                                                  (simple_identifier)))
                                                                                              (method_call_body
                                                                                                name: (simple_identifier))))))))))
                                                                              (assignment_operator)
                                                                              (expression
                                                                                (primary
                                                                                  (primary_literal
                                                                                    (integral_number
                                                                                      (decimal_number
                                                                                        (unsigned_number)))))))))))))))
                                                            (cond_predicate
                                                              (expression
                                                                left: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier)
                                                                      (simple_identifier))))
                                                                right: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier))))))
                                                            (statement_or_null
                                                              (statement
                                                                (statement_item
                                                                  (seq_block
                                                                    (statement_or_null
                                                                      (statement
                                                                        (statement_item
                                                                          (blocking_assignment
                                                                            (operator_assignment
                                                                              (variable_lvalue
                                                                                (hierarchical_identifier
                                                                                  (simple_identifier))
                                                                                (select
                                                                                  (bit_select
                                                                                    (expression
                                                                                      (primary
                                                                                        (hierarchical_identifier
                                                                                          (simple_identifier))
                                                                                        (select
                                                                                          (simple_identifier)
                                                                                          (indexed_range
                                                                                            (expression
                                                                                              (primary
                                                                                                (primary_literal
                                                                                                  (integral_number
                                                                                                    (decimal_number
                                                                                                      (unsigned_number))))))
                                                                                            (constant_expression
                                                                                              (text_macro_usage
                                                                                                (simple_identifier)
                                                                                                (list_of_actual_arguments
                                                                                                  (actual_argument
                                                                                                    (param_expression
                                                                                                      (mintypmax_expression
                                                                                                        (expression
                                                                                                          (primary
                                                                                                            (hierarchical_identifier
                                                                                                              (simple_identifier)))))))))))))))))
                                                                              (assignment_operator)
                                                                              (expression
                                                                                (primary
                                                                                  (hierarchical_identifier
                                                                                    (simple_identifier)
                                                                                    (simple_identifier)))))))))
                                                                    (statement_or_null
                                                                      (statement
                                                                        (statement_item
                                                                          (blocking_assignment
                                                                            (operator_assignment
                                                                              (variable_lvalue
                                                                                (hierarchical_identifier
                                                                                  (simple_identifier))
                                                                                (select
                                                                                  (bit_select
                                                                                    (expression
                                                                                      (primary
                                                                                        (function_subroutine_call
                                                                                          (subroutine_call
                                                                                            (method_call
                                                                                              (primary
                                                                                                (hierarchical_identifier
                                                                                                  (simple_identifier)))
                                                                                              (method_call_body
                                                                                                name: (simple_identifier)))))))
                                                                                    (expression
                                                                                      (primary
                                                                                        (primary_literal
                                                                                          (integral_number
                                                                                            (decimal_number
                                                                                              (unsigned_number)))))))))
                                                                              (assignment_operator)
                                                                              (expression
                                                                                (primary
                                                                                  (primary_literal
                                                                                    (unbased_unsized_literal)))))))))))))
                                                            (cond_predicate
                                                              (expression
                                                                left: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier)
                                                                      (simple_identifier))))
                                                                right: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier))))))
                                                            (statement_or_null
                                                              (statement
                                                                (statement_item
                                                                  (seq_block
                                                                    (statement_or_null
                                                                      (statement
                                                                        (statement_item
                                                                          (blocking_assignment
                                                                            (operator_assignment
                                                                              (variable_lvalue
                                                                                (hierarchical_identifier
                                                                                  (simple_identifier))
                                                                                (select
                                                                                  (bit_select
                                                                                    (expression
                                                                                      (primary
                                                                                        (function_subroutine_call
                                                                                          (subroutine_call
                                                                                            (method_call
                                                                                              (primary
                                                                                                (hierarchical_identifier
                                                                                                  (simple_identifier)))
                                                                                              (method_call_body
                                                                                                name: (simple_identifier)))))))
                                                                                    (expression
                                                                                      (primary
                                                                                        (primary_literal
                                                                                          (integral_number
                                                                                            (decimal_number
                                                                                              (unsigned_number)))))))))
                                                                              (assignment_operator)
                                                                              (expression
                                                                                (primary
                                                                                  (hierarchical_identifier
                                                                                    (simple_identifier))
                                                                                  (select
                                                                                    (bit_select
                                                                                      (expression
                                                                                        (primary
                                                                                          (hierarchical_identifier
                                                                                            (simple_identifier))
                                                                                          (select
                                                                                            (simple_identifier)
                                                                                            (indexed_range
                                                                                              (expression
                                                                                                (primary
                                                                                                  (primary_literal
                                                                                                    (integral_number
                                                                                                      (decimal_number
                                                                                                        (unsigned_number))))))
                                                                                              (constant_expression
                                                                                                (text_macro_usage
                                                                                                  (simple_identifier)
                                                                                                  (list_of_actual_arguments
                                                                                                    (actual_argument
                                                                                                      (param_expression
                                                                                                        (mintypmax_expression
                                                                                                          (expression
                                                                                                            (primary
                                                                                                              (hierarchical_identifier
                                                                                                                (simple_identifier)))))))))))))))))))))))))))
                                                            (cond_predicate
                                                              (expression
                                                                left: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier)
                                                                      (simple_identifier))))
                                                                right: (expression
                                                                  (primary
                                                                    (hierarchical_identifier
                                                                      (simple_identifier))))))
                                                            (statement_or_null
                                                              (statement
                                                                (statement_item
                                                                  (seq_block
                                                                    (statement_or_null
                                                                      (statement
                                                                        (statement_item
                                                                          (blocking_assignment
                                                                            (operator_assignment
                                                                              (variable_lvalue
                                                                                (hierarchical_identifier
                                                                                  (simple_identifier))
                                                                                (select
                                                                                  (bit_select
                                                                                    (expression
                                                                                      (primary
                                                                                        (function_subroutine_call
                                                                                          (subroutine_call
                                                                                            (method_call
                                                                                              (primary
                                                                                                (hierarchical_identifier
                                                                                                  (simple_identifier)))
                                                                                              (method_call_body
                                                                                                name: (simple_identifier)))))))
                                                                                    (expression
                                                                                      (primary
                                                                                        (primary_literal
                                                                                          (integral_number
                                                                                            (decimal_number
                                                                                              (unsigned_number)))))))))
                                                                              (assignment_operator)
                                                                              (expression
                                                                                (primary
                                                                                  (primary_literal
                                                                                    (unbased_unsized_literal)))))))))))))))))))))))))))))))))
                    (statement_or_null
                      (statement
                        (statement_item
                          (conditional_statement
                            (cond_predicate
                              (expression
                                left: (expression
                                  left: (expression
                                    left: (expression
                                      operator: (unary_operator)
                                      argument: (primary
                                        (hierarchical_identifier
                                          (simple_identifier))))
                                    right: (expression
                                      (primary
                                        (hierarchical_identifier
                                          (simple_identifier)))))
                                  right: (expression
                                    (primary
                                      (hierarchical_identifier
                                        (simple_identifier)))))
                                right: (expression
                                  (primary
                                    (hierarchical_identifier
                                      (simple_identifier))))))
                            (statement_or_null
                              (statement
                                (statement_item
                                  (seq_block
                                    (statement_or_null
                                      (statement
                                        (statement_item
                                          (subroutine_call_statement
                                            (subroutine_call
                                              (system_tf_call
                                                (system_tf_identifier)
                                                (list_of_arguments
                                                  (expression
                                                    (primary
                                                      (primary_literal
                                                        (string_literal
                                                          (quoted_string
                                                            (quoted_string_item))))))
                                                  (expression
                                                    (primary
                                                      (hierarchical_identifier
                                                        (simple_identifier))))
                                                  (expression
                                                    (primary
                                                      (hierarchical_identifier
                                                        (simple_identifier)))))))))))
                                    (statement_or_null
                                      (statement
                                        (statement_item
                                          (conditional_statement
                                            (cond_predicate
                                              (expression
                                                (primary
                                                  (function_subroutine_call
                                                    (subroutine_call
                                                      (method_call
                                                        (primary
                                                          (hierarchical_identifier
                                                            (simple_identifier)))
                                                        (method_call_body
                                                          (associative_array_method_call
                                                            (associative_array_method_name)
                                                            (list_of_arguments
                                                              (expression
                                                                (primary
                                                                  (hierarchical_identifier
                                                                    (simple_identifier)))))))))))))
                                            (statement_or_null
                                              (statement
                                                (statement_item
                                                  (seq_block
                                                    (statement_or_null
                                                      (statement
                                                        (statement_item
                                                          (simple_immediate_assert_statement
                                                            (expression
                                                              left: (expression
                                                                (primary
                                                                  (hierarchical_identifier
                                                                    (simple_identifier))
                                                                  (select
                                                                    (bit_select
                                                                      (expression
                                                                        (primary
                                                                          (hierarchical_identifier
                                                                            (simple_identifier))))
                                                                      (expression
                                                                        (primary
                                                                          (hierarchical_identifier
                                                                            (simple_identifier))
                                                                          (select
                                                                            (bit_select
                                                                              (expression
                                                                                (primary
                                                                                  (hierarchical_identifier
                                                                                    (simple_identifier))))))))))))
                                                              right: (expression
                                                                (primary
                                                                  (hierarchical_identifier
                                                                    (simple_identifier)))))
                                                            (action_block
                                                              (statement_or_null
                                                                (statement
                                                                  (statement_item
                                                                    (subroutine_call_statement
                                                                      (severity_system_task
                                                                        (finish_number)
                                                                        (list_of_arguments
                                                                          (expression
                                                                            (primary
                                                                              (primary_literal
                                                                                (string_literal
                                                                                  (quoted_string
                                                                                    (quoted_string_item))))))
                                                                          (expression
                                                                            (primary
                                                                              (hierarchical_identifier
                                                                                (simple_identifier))))
                                                                          (expression
                                                                            (primary
                                                                              (hierarchical_identifier
                                                                                (simple_identifier))
                                                                              (select
                                                                                (bit_select
                                                                                  (expression
                                                                                    (primary
                                                                                      (hierarchical_identifier
                                                                                        (simple_identifier))))
                                                                                  (expression
                                                                                    (primary
                                                                                      (hierarchical_identifier
                                                                                        (simple_identifier))
                                                                                      (select
                                                                                        (bit_select
                                                                                          (expression
                                                                                            (primary
                                                                                              (hierarchical_identifier
                                                                                                (simple_identifier))))))))))))
                                                                          (expression
                                                                            (primary
                                                                              (hierarchical_identifier
                                                                                (simple_identifier)))))))))))))))
                                                    (statement_or_null
                                                      (statement
                                                        (statement_item
                                                          (blocking_assignment
                                                            (inc_or_dec_expression
                                                              (variable_lvalue
                                                                (hierarchical_identifier
                                                                  (simple_identifier))
                                                                (select
                                                                  (bit_select
                                                                    (expression
                                                                      (primary
                                                                        (hierarchical_identifier
                                                                          (simple_identifier)))))))
                                                              (inc_or_dec_operator))))))))))
                                            (statement_or_null
                                              (statement
                                                (statement_item
                                                  (seq_block
                                                    (statement_or_null
                                                      (statement
                                                        (statement_item
                                                          (simple_immediate_assert_statement
                                                            (expression
                                                              left: (expression
                                                                (primary
                                                                  (hierarchical_identifier
                                                                    (simple_identifier))
                                                                  (select
                                                                    (bit_select
                                                                      (expression
                                                                        (primary
                                                                          (hierarchical_identifier
                                                                            (simple_identifier))))
                                                                      (expression
                                                                        (primary
                                                                          (primary_literal
                                                                            (integral_number
                                                                              (decimal_number
                                                                                (unsigned_number))))))))))
                                                              right: (expression
                                                                (primary
                                                                  (hierarchical_identifier
                                                                    (simple_identifier)))))
                                                            (action_block
                                                              (statement_or_null
                                                                (statement
                                                                  (statement_item
                                                                    (subroutine_call_statement
                                                                      (severity_system_task
                                                                        (finish_number)
                                                                        (list_of_arguments
                                                                          (expression
                                                                            (primary
                                                                              (primary_literal
                                                                                (string_literal
                                                                                  (quoted_string
                                                                                    (quoted_string_item))))))
                                                                          (expression
                                                                            (primary
                                                                              (hierarchical_identifier
                                                                                (simple_identifier))))
                                                                          (expression
                                                                            (primary
                                                                              (hierarchical_identifier
                                                                                (simple_identifier))
                                                                              (select
                                                                                (bit_select
                                                                                  (expression
                                                                                    (primary
                                                                                      (hierarchical_identifier
                                                                                        (simple_identifier))))
                                                                                  (expression
                                                                                    (primary
                                                                                      (primary_literal
                                                                                        (integral_number
                                                                                          (decimal_number
                                                                                            (unsigned_number))))))))))
                                                                          (expression
                                                                            (primary
                                                                              (hierarchical_identifier
                                                                                (simple_identifier))))))))))))))))))))))))))))))))))))))))
  (text_macro_usage
    (simple_identifier)
    (list_of_actual_arguments
      (actual_argument
        (param_expression
          (mintypmax_expression
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier))))))))))
